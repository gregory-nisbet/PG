#!/bin/sh
# wrapper script, launch proof-general in clean environment
# preferentially use Aquamacs, then Emacs for OS X, finally fall back
# to first emacs on the PATH

AQUAMACS_EMACS="/Applications/Aquamacs.app/Contents/MacOS/Aquamacs"
EMACS_FOR_OSX_EMACS="/Applications/Emacs.app/Contents/MacOS/Emacs"

if [ -e "$AQUAMACS_EMACS" ]; then
    emacs="$AQUAMACS_EMACS"
elif [ -e "$EMACS_FOR_OSX_EMACS" ]; then
    emacs="$EMACS_FOR_OSX_EMACS"
else
    emacs='emacs'
fi

PGHOME="$(cd "$(dirname "$0")"; cd ..; pwd -P)"
elisp="(or (featurep (quote proof-site)) (load \"$PGHOME/generic/proof-site.el\"))"

exec "$emacs" -Q -eval "$elisp" -f proof-splash-display-screen "$@"
